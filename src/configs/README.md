# Шаблоны для файлов конфигурации

## Заполнение файла конфигурации для скрипта замера производительности

### Правила заполнения файла конфигурации для скрипта замера производительности

Общие параметры теста:

- Файл конфигурации описывается в формате XML.
- Шаблон тегов находится в файле `benchmark_configuration_file_template.xml`.
- Порядок тегов важен и при изменении порядка тегов поведение скрипта не определено.
- Кодирование файла осуществляется в формате `utf-8`.
- Корневой тег `Tests`.
- Каждый тест описывается внутри тегов `Test`.
- Информация о модели описывается внутри тегов `Model`.
- Тип задачи модели описывается внутри тегов `Task`
- Имя модели описывается внутри тегов `Name`.
- Путь до папки с моделью в промежуточном формате Inference Engine
  описывается внутри тега `Path`.
- Тип данных весов модели описывается внутри тегов `WeightType`
- Информация о выборке описывается внутри тегов `Dataset`.
- Имя выборки описывается внутри тегов `Name`.
- Путь до папки с выборкой описывается внутри тегов `Path`.
- Информация о параметрах теста описывается внутри тегов `Parameters`.

Параметры для тестирования синхронного режима:

- Обязательным параметром является количество картинок,
  обрабатываемых за один прямой проход сети.
  Параметр описывается внутри тега `BatchSize`.
- Обязательным параметром является режим тестирования.
  Для синхронного режима необходимо записать `Sync` внутри тегов `Mode`.
- Обязательным параметром является устройсво для теста.
  Параметр задается внутри тега `Device`.
- Обязательным параметром является количество итераций цикла тестирования.
  Параметр описывается внутри тега `IterationCount`.
- Обязательным параметром является минимальное время выполнения вывода.
  Параметр описывается внутри тегов `MinInferenceTime`.
- Для некоторых моделей при запуске на некоторых устройствах необходима
  реализация слоёв для проведения вывода модели.
  Путь до файла с реализацией слоёв описывается внутри тегов
  `Extension`.
- Параметры, описанные допустимо оставить пустыми.
- Максимальное количество потоков выполнения вывода описывается 
  внутри тегов `ThreadCount`.
- При запуске синхронного режима тестирования параметры, относящиеся к
  асинхронному режиму тестирования будут проигноированы.

Параметры для тестирования асинхронного режима:

- Обязательным параметром является количество картинок,
  обрабатываемых за один прямой проход сети.
  Параметр описывается внутри тега `BatchSize`.
- Обязательным параметром является режим тестирования.
  Для асинхронного режима необходимо записать `Async` внутри тегов `Mode`.
- Обязательным параметром является устройсво для теста.
  Параметр описывается внутри тега `Device`.
- Обязательным параметром является количество итераций.
  Параметр описывается внутри тега `IterationCount`.
- Для некоторых моделей при запуске на некоторых устройствах необходима
  реализация слоёв для проведения вывода модели.
  Путь до файла с реализацией слоёв описывается внутри тегов
  `Extension`.
- Параметры, описанные допустимо оставить пустыми.
- Количество запросов на одновременное выполнение вывода описывается
  внутри тегов `AsyncRequestCount`.
- Максимальное количество потоков выполнения вывода описывается 
  внутри тегов `ThreadCount`.
- Максимальное количество потоков выполнения запросов на вывод описывается
  внутри тегов `StreamCount`.
- При запуске асинхронного режима тестирования параметры, относящиеся к
  синхронному режиму тестирования будут проигноированы.

### Пример заполнения файла конфигурации для скрипта замера производительности

```xml
<?xml version="1.0" encoding="utf-8" ?>
<Tests>
    <Test>
        <Model>
            <Task>Classification</Task>
            <Name>densenet-121</Name>
            <Path>C:/classification/densenet/121/IR/FP32/</Path>
            <WeightType>FP32</WeightType>
        </Model>
        <Dataset>
            <Name>ImageNET</Name>
            <Path>C:/ImageNET/</Path>
        </Dataset>
        <Parameters>
            <BatchSize>4</BatchSize>
            <Mode>Sync</Mode>
            <Device>CPU</Device>
            <Extension></Extension>
            <AsyncRequestCount></AsyncRequestCount>
            <IterationCount>1000</IterationCount>
            <ThreadCount>4</ThreadCount>
            <StreamCount></StreamCount>
            <MinInferenceTime>0.005</MinInferenceTime>
        </Parameters>
    </Test>
    <Test>
        <Model>
            <Task>Classification</Task>
            <Name>densenet-121</Name>
            <Path>C:/classification/densenet/121/IR/FP32/</Path>
            <WeightType>FP32</WeightType>
        </Model>
        <Dataset>
            <Name>ImageNET</Name>
            <Path>C:/ImageNET/</Path>
        </Dataset>
        <Parameters>
            <BatchSize>4</BatchSize>
            <Mode>Async</Mode>
            <Device>CPU</Device>
            <Extension></Extension>
            <AsyncRequestCount>4</AsyncRequestCount>
            <IterationCount>1000</IterationCount>
            <ThreadCount></ThreadCount>
            <StreamCount>4</StreamCount>
            <MinInferenceTime></MinInferenceTime>
        </Parameters>
    </Test>
</Tests>
```

## Заполнение файла конфигурации для скрипта удаленного запуска

### Правила заполнения файла конфигурации для скрипта удаленного запуска

- Файл конфигурации описывается в формате XML.
- Шаблон тегов находится в файле `remote_configuration_file_template.xml`.
- Кодирование файла осуществляется в формате `utf-8`.
- Корневой тег `Computers`.
- Каждый компьютер, на котором производится запуск бэнчмарка описывается 
  внутри тегов `Computer`.
- Первый параметр представляет собой IP-адрес компьютера, на котором планируется
  запуск. Параметр описывается внутри тегов `IP`.
- Второй параметр - Login - логин пользователя компьютера, на котором планируется
  запуск. Параметр описывается внутри тегов `Login`.
- Третий параметр - Password - пароль пользователя компьютера,
  на котором планируется запуск. Параметр описывается внутри тегов `Password`.
- Четвертый параметр - OS - операционная система, установленная на компьютер,
  на котором планируется запуск. Параметр описывается внутри тегов `OS`.
- Пятый параметр - путь до скрипта `ftp_client.py` в папке `remote_start`,
  на компьютер предварительно нужно склонировать наш репозиторий.
  Параметр описывается внутри тегов `FTPClientPath`.
- Шестой параметр - путь до файла, устанавливающего окружение OpenVINO.
  Параметр описывается внутри тегов `OpenVINOEnvironmentPath`.
- Седьмой параметр - путь до конфигурации бэнчмарка.
  Параметр описывается внутри тегов `BenchmarkConfig`.
- Восьмой параметр - имя файла, в который запишется лог работы программы.
  Параметр описывается внутри тегов `LogFile`.
- Седьмой параметр - имя таблицы, в которую
  записывается результат работы программы.
  Параметр описывается внутри тегов `ResultFile`.

### Пример заполнения файла конфигурации для скрипта удаленного запуска

```xml
<?xml version="1.0" encoding="utf-8" ?>
<Computers>
    <Computer>
        <IP>4.4.4.4</IP>
        <Login>Admin</Login>
        <Password>Admin</Password>
        <OS>Windows</OS>
        <FTPClientPath>C:/openvino-dl-benchmark/src/remote_control/ftp_client.py</FTPClientPath>
        <OpenVINOEnvironmentPath>C:/Intel/computer_vision_sdk_2018.4.420/bin/setupvars.bat</OpenVINOEnvironmentPath>
        <BenchmarkConfig>C:/openvino-dl-benchmark/src/configs/benchmark_configuration.xml</BenchmarkConfig>
        <LogFile>program_log.txt</LogFile>
        <ResultFile>result_table.csv</ResultFile>
    </Computer>
</Computers>
```
